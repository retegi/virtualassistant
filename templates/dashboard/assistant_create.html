{% extends "base_dashboard.html" %}
{% block head %}


<!-- Enlace a Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
    body {
        background-color: #f8f9fa;
    }
    
    .card {
        border-radius: 10px;
        background: white;
        max-width: 100%;
        padding: 25px;
        margin-top: 100px; /* Asegura margen en pantallas grandes */
    }
    
    @media (max-width: 768px) {
        .card {
            margin-top: 160px; /* Aumenta el margen en móviles */
        }
    }

    .bg-color{
    color: white;
    background-color: #8a2be2;
    }

    /* Efecto Hover */
    .bg-color:hover{
        background-color: #6a1bbd; /* Un tono más oscuro en hover */
        border-color: #8a2be2; /* Mantiene el color original en el borde */
    }

    .bg-color {
    background-color: #8a2be2;
    color: white;
    }
    .bg-color:hover {
    background-color: #6a1bbd;
    }

</style>


<style>
  /* Estilos para el Modal */
  .modal-content {
    border-radius: 15px;
    background: #f44336; /* Fondo rojo */
    color: #fff;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2); /* Sombra suave */
    border: none;
  }

  .modal-header {
    background-color: rgba(255, 255, 255, 0.1);
    border-bottom: 2px solid #fff;
    color: #fff;
  }

  .modal-title {
    font-size: 1.5em;
    font-weight: bold;
    text-transform: uppercase;
  }

  .modal-body {
    font-size: 1.1em;
    padding: 20px;
    color: #fff;
    text-align: center;
  }

  .modal-footer .btn {
    background-color: #ff9800;
    color: #fff;
    border-radius: 5px;
    padding: 10px 20px;
    border: none;
    font-weight: bold;
    transition: all 0.3s ease;
  }

  .modal-footer .btn:hover {
    background-color: #e68912;
  }
</style>

  {% endblock %}  

{% block content %}





<section class="py-5 mt-5" style="background-color: #f9fafa; font-family: 'Segoe UI', sans-serif;">
    <div class="container">
      <h2 class="text-center fw-bold mb-4">Crear Asistente Inteligente</h2>
  
      <form method="post" enctype="multipart/form-data" class="p-4 bg-white rounded-4 border shadow-sm">
        {% csrf_token %}
        <div class="row g-4">
  
          <!-- Nombre de la Empresa -->
          <div class="col-md-6">
            <label class="form-label fw-semibold">Nombre de la Empresa</label>
            {{ form.company_name }}
          </div>
  
          <!-- Mostrar Nombre de la Empresa -->
          <div class="col-md-6">
            <label class="form-label fw-semibold">Mostrar Nombre de la Empresa</label>
            {{ form.show_company_name }}
          </div>
  
          <!-- Logo de la Empresa -->
          <div class="col-md-6">
            <label class="form-label fw-semibold">Logo de la Empresa</label>
            {{ form.company_logo }}
          </div>
  
          <!-- Mostrar Logo de la Empresa -->
          <div class="col-md-6">
            <label class="form-label fw-semibold">Mostrar Logo de la Empresa</label>
            {{ form.show_company_logo }}
          </div>
  
          <!-- Nombre del Asistente (URL) -->
          <div class="col-md-6">
            <label class="form-label fw-semibold">Asistente URL Name</label>
            {{ form.assistant_url_name }}
          </div>
  
          <!-- Descripción de la Empresa -->
          <div class="col-md-12">
            <label class="form-label fw-semibold">Descripción de la Empresa</label>
            {{ form.description }}
          </div>
  
          <!-- Correo Electrónico de Contacto -->
          <div class="col-md-6">
            <label class="form-label fw-semibold">Correo Electrónico de Contacto</label>
            {{ form.contact_email }}
          </div>
  
          <!-- Teléfono -->
          <div class="col-md-6">
            <label class="form-label fw-semibold">Teléfono</label>
            {{ form.phone }}
          </div>
  
          <!-- Mostrar Botón Llamar -->
          <div class="col-md-6">
            <label class="form-label fw-semibold">Mostrar Botón Llamar</label>
            {{ form.show_phone_call }}
          </div>
  
          <!-- Sitio Web -->
          <div class="col-md-6">
            <label class="form-label fw-semibold">Sitio Web</label>
            {{ form.website }}
          </div>
  
          <!-- Dirección -->
          <div class="col-md-12">
            <label class="form-label fw-semibold">Dirección</label>
            {{ form.address }}
          </div>
  
          <!-- Horario de la Empresa -->
          <div class="col-md-6">
            <label class="form-label fw-semibold">Horario Comercial</label>
            {{ form.business_hours }}
          </div>
  
          <!-- Redes Sociales -->
          <div class="col-md-6">
            <label class="form-label fw-semibold">Facebook</label>
            {{ form.facebook }}
          </div>
  
          <div class="col-md-6">
            <label class="form-label fw-semibold">Mostrar Botón Facebook</label>
            {{ form.show_facebook_button }}
          </div>
  
          <div class="col-md-6">
            <label class="form-label fw-semibold">WhatsApp</label>
            {{ form.whatsapp }}
          </div>
  
          <div class="col-md-6">
            <label class="form-label fw-semibold">Mostrar Botón WhatsApp</label>
            {{ form.show_whatsapp_button }}
          </div>
  
          <div class="col-md-6">
            <label class="form-label fw-semibold">Instagram</label>
            {{ form.instagram }}
          </div>
  
          <div class="col-md-6">
            <label class="form-label fw-semibold">Mostrar Botón Instagram</label>
            {{ form.show_instagram_button }}
          </div>
  
          <div class="col-md-6">
            <label class="form-label fw-semibold">YouTube</label>
            {{ form.youtube }}
          </div>
  
          <div class="col-md-6">
            <label class="form-label fw-semibold">Mostrar Botón YouTube</label>
            {{ form.show_youtube_button }}
          </div>
  
          <div class="col-md-6">
            <label class="form-label fw-semibold">TikTok</label>
            {{ form.tiktok }}
          </div>
  
          <div class="col-md-6">
            <label class="form-label fw-semibold">Mostrar Botón TikTok</label>
            {{ form.show_tiktok_button }}
          </div>
  
          <div class="col-md-6">
            <label class="form-label fw-semibold">Twitter</label>
            {{ form.twitterx }}
          </div>
  
          <div class="col-md-6">
            <label class="form-label fw-semibold">Mostrar Botón Twitter</label>
            {{ form.show_twitterx_button }}
          </div>
  
          <div class="col-md-6">
            <label class="form-label fw-semibold">Telegram</label>
            {{ form.telegram }}
          </div>
  
          <div class="col-md-6">
            <label class="form-label fw-semibold">Mostrar Botón Telegram</label>
            {{ form.show_telegram_button }}
          </div>
  
          <!-- Imágenes y Visualización -->
          <div class="col-md-6">
            <label class="form-label fw-semibold">Imagen del Asistente</label>
            {{ form.assistant_image }}
          </div>
  
          <div class="col-md-6">
            <label class="form-label fw-semibold">Mostrar Imagen del Asistente</label>
            {{ form.show_assistant_image }}
          </div>
  
          <div class="col-md-6">
            <label class="form-label fw-semibold">Imagen de Fondo</label>
            {{ form.background_image }}
          </div>
  
          <div class="col-md-6">
            <label class="form-label fw-semibold">Mostrar Imagen de Fondo</label>
            {{ form.show_background_image }}
          </div>
  
          <div class="col-md-6">
            <label class="form-label fw-semibold">Mostrar Regresar al Sitio Web</label>
            {{ form.show_return_to_web }}
          </div>
  
          <!-- Colores Personalizados -->
          <div class="col-md-6">
            <label class="form-label fw-semibold">Color de Fondo</label>
            {{ form.background_color }}
          </div>
  
          <div class="col-md-6">
            <label class="form-label fw-semibold">Mostrar Color de Fondo</label>
            {{ form.show_background_color }}
          </div>
  
          <div class="col-md-6">
            <label class="form-label fw-semibold">Color de Fondo del Formulario</label>
            {{ form.form_background_color }}
          </div>
  
          <div class="col-md-6">
            <label class="form-label fw-semibold">Color de Fondo del Botón</label>
            {{ form.button_background_color }}
          </div>
  
          <div class="col-md-6">
            <label class="form-label fw-semibold">Color de Texto del Botón</label>
            {{ form.button_text_color }}
          </div>
  
          <div class="col-md-6">
            <label class="form-label fw-semibold">Color de Texto del Cliente</label>
            {{ form.chat_customer_text_color }}
          </div>
  
          <div class="col-md-6">
            <label class="form-label fw-semibold">Color de Texto del Asistente</label>
            {{ form.chat_assistant_text_color }}
          </div>
  
          <!-- Botón de Enviar -->
          <div class="col-12 text-center mt-3">
            <button type="submit" class="btn btn-primary px-5 py-2 fw-bold">Guardar cambios</button>
          </div>
        </div>
      </form>
    </div>
</section>

<!-- Alerta personalizada (inicialmente oculta y centrada) -->
<!-- Modal -->
<div class="modal fade" id="urlModal" tabindex="-1" aria-labelledby="urlModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="urlModalLabel">¡Error! URL Obligatoria</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          La URL del asistente es obligatoria. Por favor, ingresa una URL válida.
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
        </div>
      </div>
    </div>
  </div>
  




<!-- Enlace a Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

<!-- JavaScript para Manejo de Pasos -->
<script>
    document.addEventListener("DOMContentLoaded", function () {
        let currentStep = 0;
        const steps = document.querySelectorAll(".form-step");
        const nextBtns = document.querySelectorAll(".next-step");
        const prevBtns = document.querySelectorAll(".prev-step");
        const form = document.getElementById("business-profile-form");
        const saveBtn = form.querySelector('button[type="submit"]');
    
        function showStep(stepIndex) {
            steps.forEach((step, index) => {
                step.style.display = index === stepIndex ? "block" : "none";
            });
            document.querySelector(".card").scrollIntoView({ behavior: "smooth" });
        }
    
        nextBtns.forEach((button) => 
            button.addEventListener("click", () => { 
                if (currentStep < steps.length - 1) showStep(++currentStep); 
            })
        );
    
        prevBtns.forEach((button) => 
            button.addEventListener("click", () => { 
                if (currentStep > 0) showStep(--currentStep); 
            })
        );
    

    });
</script>


<script>
  document.addEventListener("DOMContentLoaded", function() {
    // Seleccionamos el campo de la URL del asistente
    const assistantUrlField = document.querySelector('input[name="assistant_url_name"]');
    
    // Agregamos un evento para prevenir caracteres no permitidos
    assistantUrlField.addEventListener("input", function(event) {
      // Reemplazar los puntos y caracteres especiales no permitidos
      this.value = this.value.replace(/[^\w\-]/g, '');
    });
  });
</script>

    
<script>
    document.addEventListener('DOMContentLoaded', function () {
      // Obtener el formulario y el modal
      const form = document.querySelector('form');
      const modal = new bootstrap.Modal(document.getElementById('urlModal'));
  
      form.addEventListener('submit', function(event) {
        const assistantUrlName = document.querySelector('input[name="assistant_url_name"]');
        
        // Verificamos si el campo URL está vacío
        if (assistantUrlName.value.trim() === "") {
          // Mostrar el modal si el campo está vacío
          modal.show();
          
          // Evitar que el formulario se envíe
          event.preventDefault();
        }
      });
    });
  </script>
  
  


{% endblock %}
