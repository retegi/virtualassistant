{% extends "base.html" %}}
{% load static %}

{% block head %}
<style>
.formulario {
    padding-top: 30vh;

}
body{
    background-image: url("{% static 'home/asistente-virtual-empresas.jpg' %}");
    background-size: cover;
    height: 100vh;
}
.container-header{
    height: 100vh;
}
    .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }

      .b-example-divider {
        width: 100%;
        height: 3rem;
        background-color: rgba(0, 0, 0, .1);
        border: solid rgba(0, 0, 0, .15);
        border-width: 1px 0;
        box-shadow: inset 0 .5em 1.5em rgba(0, 0, 0, .1), inset 0 .125em .5em rgba(0, 0, 0, .15);
      }

      .b-example-vr {
        flex-shrink: 0;
        width: 1.5rem;
        height: 100vh;
      }

      .bi {
        vertical-align: -.125em;
        fill: currentColor;
      }

      .nav-scroller {
        position: relative;
        z-index: 2;
        height: 2.75rem;
        overflow-y: hidden;
      }

      .nav-scroller .nav {
        display: flex;
        flex-wrap: nowrap;
        padding-bottom: 1rem;
        margin-top: -1px;
        overflow-x: auto;
        text-align: center;
        white-space: nowrap;
        -webkit-overflow-scrolling: touch;
      }

      .btn-bd-primary {
        --bd-violet-bg: #712cf9;
        --bd-violet-rgb: 112.520718, 44.062154, 249.437846;

        --bs-btn-font-weight: 600;
        --bs-btn-color: var(--bs-white);
        --bs-btn-bg: var(--bd-violet-bg);
        --bs-btn-border-color: var(--bd-violet-bg);
        --bs-btn-hover-color: var(--bs-white);
        --bs-btn-hover-bg: #6528e0;
        --bs-btn-hover-border-color: #6528e0;
        --bs-btn-focus-shadow-rgb: var(--bd-violet-rgb);
        --bs-btn-active-color: var(--bs-btn-hover-color);
        --bs-btn-active-bg: #5a23c8;
        --bs-btn-active-border-color: #5a23c8;
      }

      .bd-mode-toggle {
        z-index: 1500;
      }

      .bd-mode-toggle .dropdown-menu .active .bi {
        display: block !important;
      }
</style>
{% endblock %}

{% block content %}


<div class="container-fluid text-center container-header">
    <div class="row">
        <div class="col-3"></div>
        <div class="col-6 formulario">
            <form class="bg-white p-5">
                <div class="mb-3">
                <h1>Nombre de tu<br>empresa o proyecto</h1>
                    <!--<label for="exampleInputEmail1" class="form-label">Nombre para tu asistente virtual:</label>-->
                    <input type="text" class="form-control text-center text-success" id="exampleInputEmail1" aria-describedby="emailHelp">
                    <!--<div id="emailHelp" class="form-text">Añade el siguiente enlace de tu asistente en tu web:</div>-->
                    <div id="emailHelp" class="form-text"><label class="h5">www.tuasistentevirtual.com/<b class="text-success h3" id="assistanturl">bolsosmadrid</b></label></div>
                </div>
                <button type="button" class="btn btn-dark w-25" type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModalCenter">Crear</button>
            </form>
        </div>
        <div class="col-3"></div>
    </div>
</div>


<div class="bg-white" style="width:100vw;">
    <div class="container bg-white">
        <div class="row p-5">
            <div class="w-100 text-center p-5">
                <h1 class="">Tu asistente virtual en 3 pasos</h1>
                <label>Tu asistente virtual atiende tus clientes 24/7 e informará a tus clientes sobre tu empresa, productos, servicios y precios como tú decidas</label>
            </div>
            <div class="col-4">
                <div class="card p-5" style="width: 18rem;">
                    <!--<img src="..." class="card-img-top" alt="...">-->
                    <h1 class="text-center" style="font-size:5em">1</h1>
                    <div class="card-body text-center">Elige un nombre<br>para tu asistente virtual</p>
                    </div>
                </div>
            </div>
            <div class="col-4">
                <div class="card p-5" style="width: 18rem;">
                    <!--<img src="..." class="card-img-top" alt="...">-->
                    <h1 class="text-center" style="font-size:5em">2</h1>
                    <div class="card-body">
                        <p class="card-text text-center">Entrena tu asistente<br>con los datos de tu<br>empresa, productos<br>y servicios</p>
                    </div>
                </div>
            </div>
            <div class="col-4">
                <div class="card p-5" style="width: 18rem;">
                    <!--<img src="..." class="card-img-top" alt="...">-->
                    <h1 class="text-center" style="font-size:5em">3</h1>
                    <div class="card-body">
                        <p class="card-text text-center">Añade el enlace<br>o código HTML<br>en tu web o aplicación</p>
                    </div>
                </div>
            </div>
        </div>
</div>


<div class="w-100 bg-light">
    <div class="container py-5"">
        <div class="row py-5">
            <div class="col-12 text-center">
                <h1 class="">Entrena tu asistente con los datos de tu empresa, productos y servicios. Y dile cómo quieres que atienda a tus clientes.</h1>
            </div>
        </div>
    </div>
</div>    

<div class="container" id="tarifa">
    <div class="pricing-header p-3 pb-md-4 mx-auto text-center">
      <h1 class="display-4 fw-normal text-body-emphasis">Tarifa</h1>
      <p class="fs-5 text-body-secondary">Quickly build an effective pricing table for your potential customers with this Bootstrap example. It’s built with default Bootstrap components and utilities with little customization.</p>
    </div>
 <main>
    <div class="row row-cols-1 row-cols-md-3 mb-3 text-center">
      <div class="col">
        <div class="card mb-4 rounded-3 shadow-sm">
          <div class="card-header py-3">
            <h4 class="my-0 fw-normal">Gratis</h4>
          </div>
          <div class="card-body">
            <h1 class="card-title pricing-card-title">0€<small class="text-body-secondary fw-light">/mes</small></h1>
            <ul class="list-unstyled mt-3 mb-4" style="min-height:20vh;">
            <label class="text-secondary">Tu asistente sabrá...</label><br><br>
              <li>Descripción de la empresa</li>
              <li>Horarios</li>
              <li>Email</li>
              <li>Teléfono</li>
              <li>Dirección física</li>
              <li>8 horas límite</li>
            </ul>
            <button type="button" class="w-100 btn btn-lg btn-outline-primary">Añadir</button>
          </div>
        </div>
      </div>
      <div class="col">
        <div class="card mb-4 rounded-3 shadow-sm border-primary">
          <div class="card-header py-3 text-bg-primary border-primary">
            <h4 class="my-0 fw-normal">Anual</h4>
            <label class="">Recomenadado</label>
          </div>
          <div class="card-body">
            <h1 class="card-title pricing-card-title">450€<small class="text-body-secondary fw-light">/año</small></h1>
            <ul class="list-unstyled mt-3 mb-4" style="min-height:20vh;">
            <label class="text-secondary">Tu asistente sabrá...</label><br><br>
              <li>Descripción de la empresa</li>
              <li><b>Información de productos</b></li>
              <li><b>Precios de productos</b></li>
              <li><b>Información de servicios</b></li>
              <li><b>Precios de servicios</b></li>
              <li>Ilimitado 24/7</li>
              <li>Horarios</li>
              <li>Email</li>
              <li>Teléfono</li>
              <li>Dirección física</li>
              
            </ul>
            <button type="button" class="w-100 btn btn-lg btn-primary">Añadir</button>
          </div>
        </div>
      </div>
      <div class="col">
        <div class="card mb-4 rounded-3 shadow-sm">
          <div class="card-header py-3">
            <h4 class="my-0 fw-normal">Mensual</h4>
          </div>
          <div class="card-body">
            <h1 class="card-title pricing-card-title">45€<small class="text-body-secondary fw-light">/mes</small></h1>
            <ul class="list-unstyled mt-3 mb-4" style="min-height:20vh;">
            <label class="text-secondary">Tu asistente sabrá...</label><br><br>
            
              <li>Descripción de la empresa</li>
              <li><b>Información de productos</b></li>
              <li><b>Precios de productos</b></li>
              <li><b>Información de servicios</b></li>
              <li><b>Precios de servicios</b></li>
              <li>Ilimitado 24/7</li>
              <li>Horarios</li>
              <li>Email</li>
              <li>Teléfono</li>
              <li>Dirección física</li>
            </ul>
            <button type="button" class="w-100 btn btn-lg border-primary">Añadir</button>
          </div>
        </div>
      </div>
    </div>

    <h2 class="display-6 text-center mb-4">Compare plans</h2>

    <div class="table-responsive">
      <table class="table text-center">
        <thead>
          <tr>
            <th style="width: 34%;"></th>
            <th style="width: 22%;">Free</th>
            <th style="width: 22%;">Pro</th>
            <th style="width: 22%;">Enterprise</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th scope="row" class="text-start">Public</th>
            <td><svg class="bi" width="24" height="24"><use xlink:href="#check"/></svg></td>
            <td><svg class="bi" width="24" height="24"><use xlink:href="#check"/></svg></td>
            <td><svg class="bi" width="24" height="24"><use xlink:href="#check"/></svg></td>
          </tr>
          <tr>
            <th scope="row" class="text-start">Private</th>
            <td></td>
            <td><svg class="bi" width="24" height="24"><use xlink:href="#check"/></svg></td>
            <td><svg class="bi" width="24" height="24"><use xlink:href="#check"/></svg></td>
          </tr>
        </tbody>

        <tbody>
          <tr>
            <th scope="row" class="text-start">Permissions</th>
            <td><svg class="bi" width="24" height="24"><use xlink:href="#check"/></svg></td>
            <td><svg class="bi" width="24" height="24"><use xlink:href="#check"/></svg></td>
            <td><svg class="bi" width="24" height="24"><use xlink:href="#check"/></svg></td>
          </tr>
          <tr>
            <th scope="row" class="text-start">Sharing</th>
            <td></td>
            <td><svg class="bi" width="24" height="24"><use xlink:href="#check"/></svg></td>
            <td><svg class="bi" width="24" height="24"><use xlink:href="#check"/></svg></td>
          </tr>
          <tr>
            <th scope="row" class="text-start">Unlimited members</th>
            <td></td>
            <td><svg class="bi" width="24" height="24"><use xlink:href="#check"/></svg></td>
            <td><svg class="bi" width="24" height="24"><use xlink:href="#check"/></svg></td>
          </tr>
          <tr>
            <th scope="row" class="text-start">Extra security</th>
            <td></td>
            <td></td>
            <td><svg class="bi" width="24" height="24"><use xlink:href="#check"/></svg></td>
          </tr>
        </tbody>
      </table>
    </div>
  </main>
</div>


<div class="bg-light">
  <div class="container p-5">

    <div class="row">
      <div class="12 text-center">
        <h1 class="">Contactar</h1>
      </div>
    </div>


    <div class="row">
      <div class="col-12">
        <form>
          <div class="form-group">
            <label for="exampleFormControlInput1">Email address</label>
            <input type="email" class="form-control" id="exampleFormControlInput1" placeholder="name@example.com">
          </div>
          <div class="form-group">
            <label for="exampleFormControlSelect1">Example select</label>
            <select class="form-control" id="exampleFormControlSelect1">
              <option>1</option>
              <option>2</option>
              <option>3</option>
              <option>4</option>
              <option>5</option>
            </select>
          </div>
          <div class="form-group">
            <label for="exampleFormControlSelect2">Example multiple select</label>
            <select multiple class="form-control" id="exampleFormControlSelect2">
              <option>1</option>
              <option>2</option>
              <option>3</option>
              <option>4</option>
              <option>5</option>
            </select>
          </div>
          <div class="form-group">
            <label for="exampleFormControlTextarea1">Example textarea</label>
            <textarea class="form-control" id="exampleFormControlTextarea1" rows="3"></textarea>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Modal -->
<div class="modal fade" id="exampleModalCenter" tabindex="-1" aria-labelledby="exampleModalTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">Añade información básica:</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
       <form method="post" id="business-profile-form">
        {% csrf_token %}
        <div class="form-group">
            {{ form.as_p }}
        </div>
        <button type="submit" class="btn btn-primary w-100">Guardar</button><br><br>
        <label class="text-dark">Nota: Desde el panel de control se puede actualizar y detallar toda la información para el asistente virtual</label>
    </form>
      </div>
      <div class="modal-footer">
        <!--<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
        <button type="button" class="btn btn-primary">Guardar cambios</button>-->
      </div>
    </div>
  </div>
</div>


<script>
document.addEventListener("DOMContentLoaded", function() {
    const input = document.getElementById("exampleInputEmail1"); // Campo donde el usuario escribe el nombre
    const assistantUrl = document.getElementById("assistanturl"); // Texto dinámico de la URL
    const modalCompanyName = document.getElementById("id_assistant_url_name"); // Campo en el formulario modal

    input.addEventListener("input", function() {
        // Remover espacios y caracteres especiales para crear una URL válida
        let sanitizedText = input.value.trim().toLowerCase().replace(/\s+/g, '');

        // Actualizar la URL del asistente
        assistantUrl.textContent = sanitizedText;

        // Actualizar el campo de empresa en el modal si existe
        if (modalCompanyName) {
            modalCompanyName.value = input.value;
        }
    });
});
</script>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const form = document.getElementById("business-profile-form"); // Formulario
    const modalElement = document.getElementById("exampleModalCenter"); // ID del modal
    const modal = new bootstrap.Modal(modalElement); // Instancia del modal
    const submitButton = form.querySelector("button[type='submit']"); // Botón de guardar

    submitButton.addEventListener("click", function (event) {
        event.preventDefault(); // Evita la recarga inmediata

        // Obtener el campo business_hours y validarlo como JSON
        const businessHoursInput = document.getElementById("id_business_hours");
        try {
            JSON.parse(businessHoursInput.value); // Verifica si el input es JSON válido
        } catch (error) {
            alert("El campo Horario de Atención debe tener un formato JSON válido.\nEjemplo: {\"lunes\": \"10:00 - 17:00\"}");
            return;
        }

        modal.hide(); // Cierra el modal
        form.submit(); // Envía el formulario
    });
});
</script>





{% endblock %}